<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<dom-module id="post-form">
    <template>
        <style>
            .form-container {
                width: 50%;
            }

            .pyramid-card {
                outline: 3px solid salmon;
                width: 600px;
                display: flex;
                flex-direction: column;
                align-items: center;
                background-color: white;
            }

            #pyramid-icon {
                height: 100px;
            }

            paper-input {
                width: 70%;
            }

            paper-textarea {
                width: 90%;
            }

            paper-button {
                margin-top: 16px;
            }
        </style>
        <div class="pyramid-card">
            <img id="pyramid-icon" src="../../images/piramide-maya.svg" alt="pyramid">
            <paper-input value={{titleInputVal}} invalid="{{validTitle}}" pattern=".{1,10}" required auto-validate error-message="This field must be between 1 and 140 characters long"
                label="Title"></paper-input>

            <paper-textarea rows$="[[rows]]" value={{textAreaValue}} invalid="{{validPost}}" maxlength="13" required auto-validate error-message="This field must be between 1 and 140 characters long"
                label="Post"></paper-textarea>


            <paper-button disabled="[[disableBtn]]" raised on-click="submitForm">Submit</paper-button>


        </div>



    </template>
    <script>
        (function postForm(customElements) {
            class PostForm extends Polymer.Element {
                static get is() {
                    return 'post-form'
                }

                static get properties() {
                    return {
                        users: Array,
                        validTitle: Boolean,
                        validPost: Boolean,
                        titleInputVal: String,
                        textAreaValue: String,
                        disableBtn: {
                            computed: 'isFormValid(validTitle, validPost, titleInputVal, textAreaValue)'
                        },
                        rows: {
                            value: 2
                        }
                    }
                }

                submitForm() {
                    this.$.iron.submit();
                }

                isFormValid(title, post, titleInputVal, textAreaValue) {
                    if (!titleInputVal || !textAreaValue) {
                        return true
                    }
                    if (title && post) {
                        return true
                    }
                    return false
                }
            }
            customElements.define(PostForm.is, PostForm);

        })(window.customElements);
    </script>
</dom-module>